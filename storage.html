<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <a
      href="bnc://app.binance.com/payment/secpay?tempToken=EtCzJAFfsgaUZEEuNxLMgQQnYuwylnzY"
      onclick="handleLinkClick(event)"
    >
      打开应用
    </a>

    <div id="result"></div>
    <div id="result11"></div>
  </body>
  <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.15.1/vconsole.min.js"></script>
  <script>
    new VConsole();
  </script>
  <script>
    /*

    "model": {
        "deeplink": "bnc://app.binance.com/payment/secpay?tempToken=EtCzJAFfsgaUZEEuNxLMgQQnYuwylnzY",
        "prepayId": "320848559222538240",
        "checkoutUrl": "https://pay.binance.com/en/checkout/f0aa4fd3cef84779855e50b324d73792"
    },

 */

    const handleLinkClick = (event) => {
      const start = Date.now();
      const timeout = 2000; // 设置超时时间
      const result = document.querySelector("#result");
      setTimeout(() => {
        const duration = Date.now() - start;
        if (duration < timeout) {
          result.innerText = "用户可能选择了打开应用";
        } else {
          result.innerText = "用户可能没有打开应用";
        }
      }, timeout);
    };
    const result11 = document.querySelector("#result11");
    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState === "visible") {
        result11.innerText = "页面现在是可见的";
        // 执行当页面可见时的操作
        const visibleDiv = document.createElement("div");
        visibleDiv.innerText = "页面现在是可见的内容";
        document.body.appendChild(visibleDiv);
      } else {
        result11.innerText = "页面现在是隐藏的";
        // 执行当页面隐藏时的操作
        const hiddenDiv = document.createElement("div");
        hiddenDiv.innerText = "页面现在是隐藏的内容";
        document.body.appendChild(hiddenDiv);
      }
    });
  </script>
</html>
