<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Checkout Flow</title>
		<script src="https://checkout-web-components.checkout.com/index.js"></script>
		<style></style>
		<link rel="stylesheet" href="./googlepay.css" />
	</head>
	<body>
		<div class="outer">
			<div id="flow-container"></div>
			<div class="mask"></div>
		</div>
	</body>
	<script>
		let paymentSessions = [
			{
				payment_session_secret: "pss_481fbdd7-8ed7-4afe-9908-e5e01c640e00",
				_links: {
					self: {
						href: "https://api.sandbox.checkout.com/payment-sessions/ps_34lbWDgkrJ3nR6exqfgO7AR2krx",
					},
				},
				webUrl:
					"https://api.sandbox.checkout.com/payment-sessions/ps_34lbWDgkrJ3nR6exqfgO7AR2krx",
				payment_session_token:
					"YmFzZTY0:eyJpZCI6InBzXzM0bGJXRGdrckozblI2ZXhxZmdPN0FSMmtyeCIsImVudGl0eV9pZCI6ImVudF9uNWh1M3N6bGlsMzNlYjI3N3pmNzQ0ZXV5ZSIsImV4cGVyaW1lbnRzIjp7fSwicHJvY2Vzc2luZ19jaGFubmVsX2lkIjoicGNfZzZlYmtqcmw1bjJ1ZG9kajcydmMyYmw0b3UiLCJhbW91bnQiOjE1MDAsImxvY2FsZSI6ImVuLUdCIiwiY3VycmVuY3kiOiJVU0QiLCJwYXltZW50X21ldGhvZHMiOlt7InR5cGUiOiJnb29nbGVwYXkiLCJtZXJjaGFudCI6eyJpZCI6IjA4MTEzMDg5Mzg2MjY4ODQ5OTgyIiwibmFtZSI6IkNhcmQgSG9sZGVyIE5hbWUiLCJvcmlnaW4iOiJodHRwczovL3JhbXAtdGVzdC5hbGNoZW15dGVjaC5jYyJ9LCJ0cmFuc2FjdGlvbl9pbmZvIjp7InRvdGFsX3ByaWNlX3N0YXR1cyI6IkZJTkFMIiwidG90YWxfcHJpY2UiOiIxNSIsImNvdW50cnlfY29kZSI6IkdCIiwiY3VycmVuY3lfY29kZSI6IlVTRCJ9LCJjYXJkX3BhcmFtZXRlcnMiOnsiYWxsb3dlZF9hdXRoX21ldGhvZHMiOlsiUEFOX09OTFkiLCJDUllQVE9HUkFNXzNEUyJdLCJhbGxvd2VkX2NhcmRfbmV0d29ya3MiOlsiVklTQSIsIk1BU1RFUkNBUkQiLCJBTUVYIl19fV0sImZlYXR1cmVfZmxhZ3MiOlsiYW5hbHl0aWNzX29ic2VydmFiaWxpdHlfZW5hYmxlZCIsImNhcmRfZmllbGRzX2VuYWJsZWQiLCJnZXRfd2l0aF9wdWJsaWNfa2V5X2VuYWJsZWQiLCJsb2dzX29ic2VydmFiaWxpdHlfZW5hYmxlZCIsInJpc2tfanNfZW5hYmxlZCIsInVzZV9ub25fYmljX2lkZWFsX2ludGVncmF0aW9uIl0sInJpc2siOnsiZW5hYmxlZCI6ZmFsc2V9LCJtZXJjaGFudF9uYW1lIjoiQ2FyZCBIb2xkZXIgTmFtZSIsInBheW1lbnRfc2Vzc2lvbl9zZWNyZXQiOiJwc3NfNDgxZmJkZDctOGVkNy00YWZlLTk5MDgtZTVlMDFjNjQwZTAwIiwiaW50ZWdyYXRpb25fZG9tYWluIjoiYXBpLnNhbmRib3guY2hlY2tvdXQuY29tIn0=",
				id: "ps_34lbWDgkrJ3nR6exqfgO7AR2krx",
			},
		];

		let paymentSession = paymentSessions[0];

		const publicKey = "pk_sbox_oojajhh2zmo2mil6o5wjmy33tyf";

		async function init() {
			const checkout = await CheckoutWebComponents({
				paymentSession: paymentSession,
				publicKey: publicKey,
				environment: "sandbox", // Use 'production' for Production environment
				onPaymentCompleted: async (_self, paymentResponse) => {
					// Handle synchronous payment completion
					console.log("Payment successful", paymentResponse);
				},
				onError: async (component, error) => {
					console.log(`%c${"error"}`, "font-size:30px;color:#aa5ff0");
					console.dir(error);
					console.log(component);
				},
			});
			console.log(checkout);

			const flowComponent = checkout.create("flow");
			flowComponent.mount("#flow-container");
			console.log(`%c${"flow dosn"}`, "font-size:30px;color:#aa5ff0");
			console.log(flowComponent);
		}

		init();
		/*	let c = 0;
		let t = setInterval(() => {
			c++;
			if (c >= 50) {
				clearInterval(t);
			}
			// console.log(document.querySelectorAll("span[role=alert]")[0]?.outerHTML);
			console.log(document.querySelector("#flow-container").outerHTML);
			//
		}, 1000);*/
	</script>
</html>
