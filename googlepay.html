<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Checkout Flow</title>
		<script src="https://checkout-web-components.checkout.com/index.js"></script>
		<style></style>
		<link rel="stylesheet" href="./googlepay.css" />
	</head>
	<body>
		<div id="flow-container"></div>
	</body>
	<script>
		let paymentSessions = [
			{
				payment_session_secret: "pss_fe52e2be-d8c9-4771-b29e-3af1441f9176",
				_links: {
					self: {
						href: "https://api.sandbox.checkout.com/payment-sessions/ps_34jQ8cE8qdfKAsbp0ZDwPu4xfTC",
					},
				},
				webUrl:
					"https://api.sandbox.checkout.com/payment-sessions/ps_34jQ8cE8qdfKAsbp0ZDwPu4xfTC",
				payment_session_token:
					"YmFzZTY0:eyJpZCI6InBzXzM0alE4Y0U4cWRmS0FzYnAwWkR3UHU0eGZUQyIsImVudGl0eV9pZCI6ImVudF9uNWh1M3N6bGlsMzNlYjI3N3pmNzQ0ZXV5ZSIsImV4cGVyaW1lbnRzIjp7fSwicHJvY2Vzc2luZ19jaGFubmVsX2lkIjoicGNfZzZlYmtqcmw1bjJ1ZG9kajcydmMyYmw0b3UiLCJhbW91bnQiOjE1MDAwLCJsb2NhbGUiOiJlbi1HQiIsImN1cnJlbmN5IjoiVVNEIiwicGF5bWVudF9tZXRob2RzIjpbeyJ0eXBlIjoiZ29vZ2xlcGF5IiwibWVyY2hhbnQiOnsiaWQiOiIwODExMzA4OTM4NjI2ODg0OTk4MiIsIm5hbWUiOiJDYXJkIEhvbGRlciBOYW1lIiwib3JpZ2luIjoiaHR0cHM6Ly9yYW1wLXRlc3QuYWxjaGVteXRlY2guY2MifSwidHJhbnNhY3Rpb25faW5mbyI6eyJ0b3RhbF9wcmljZV9zdGF0dXMiOiJGSU5BTCIsInRvdGFsX3ByaWNlIjoiMTUwIiwiY291bnRyeV9jb2RlIjoiR0IiLCJjdXJyZW5jeV9jb2RlIjoiVVNEIn0sImNhcmRfcGFyYW1ldGVycyI6eyJhbGxvd2VkX2F1dGhfbWV0aG9kcyI6WyJQQU5fT05MWSIsIkNSWVBUT0dSQU1fM0RTIl0sImFsbG93ZWRfY2FyZF9uZXR3b3JrcyI6WyJWSVNBIiwiTUFTVEVSQ0FSRCIsIkFNRVgiXX19XSwiZmVhdHVyZV9mbGFncyI6WyJhbmFseXRpY3Nfb2JzZXJ2YWJpbGl0eV9lbmFibGVkIiwiY2FyZF9maWVsZHNfZW5hYmxlZCIsImdldF93aXRoX3B1YmxpY19rZXlfZW5hYmxlZCIsImxvZ3Nfb2JzZXJ2YWJpbGl0eV9lbmFibGVkIiwicmlza19qc19lbmFibGVkIiwidXNlX25vbl9iaWNfaWRlYWxfaW50ZWdyYXRpb24iXSwicmlzayI6eyJlbmFibGVkIjpmYWxzZX0sIm1lcmNoYW50X25hbWUiOiJDYXJkIEhvbGRlciBOYW1lIiwicGF5bWVudF9zZXNzaW9uX3NlY3JldCI6InBzc19mZTUyZTJiZS1kOGM5LTQ3NzEtYjI5ZS0zYWYxNDQxZjkxNzYiLCJpbnRlZ3JhdGlvbl9kb21haW4iOiJhcGkuc2FuZGJveC5jaGVja291dC5jb20ifQ==",
				id: "ps_34jQ8cE8qdfKAsbp0ZDwPu4xfTC",
			},
		];

		let paymentSession = paymentSessions[0];

		const publicKey = "pk_sbox_oojajhh2zmo2mil6o5wjmy33tyf";

		async function init() {
			const checkout = await CheckoutWebComponents({
				paymentSession: paymentSession,
				publicKey: publicKey,
				environment: "sandbox", // Use 'production' for Production environment
				onPaymentCompleted: async (_self, paymentResponse) => {
					// Handle synchronous payment completion
					console.log("Payment successful", paymentResponse);
				},
				onError: async (component, error) => {
					console.log(`%c${"error"}`, "font-size:30px;color:#aa5ff0");
					console.dir(error);
					console.log(component);
				},
			});
			console.log(checkout);

			const flowComponent = checkout.create("flow");
			flowComponent.mount("#flow-container");
			console.log(flowComponent);
		}

		init();
		/*	let c = 0;
		let t = setInterval(() => {
			c++;
			if (c >= 50) {
				clearInterval(t);
			}
			// console.log(document.querySelectorAll("span[role=alert]")[0]?.outerHTML);
			console.log(document.querySelector("#flow-container").outerHTML);
			//
		}, 1000);*/
	</script>
</html>
