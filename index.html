<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- import CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"
    />
    <title>Document</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      div {
        margin-bottom: 20px;
      }
      .active {
        color: #409eff;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
  </body>
  <script src="https://unpkg.com/vue@2/dist/vue.js"></script>
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.15.1/vconsole.min.js"></script>
  <script>
    new VConsole();
    console.log(window);
    console.log(window.telegram);
  </script>

  <script>
    window.vm = new Vue({
      el: "#app",
      data() {
        return {
          link: "",
          env: env,
        };
      },
      computed: {},
      mounted() {
        this.isTelegram();
        setTimeout(() => {
          this.isTelegram();
        }, 3000);
      },
      methods: {
        getWebUrl() {
          console.log(123);
          getWebUrl().then(({ code, model }) => {
            console.log(code);
            console.log(model);
            if (code === "0") {
              this.link = model?.webUrl;
            }
          });
        },
        a_self() {
          window.location.href = this.link;
        },
        setEnv(type) {
          this.env = type;
          window.env = type;
        },
        openBinance() {
          window.open(
            "bnc://app.binance.com/payment/secpay?tempToken=XlmtzXu70AU4VWN2DeZbDYbHTf4WpBjY&returnLink=https://test-crypto-payment.alchemypay.org?userCance=false&orderNum=300217224116810101451&cancelLink=https://test-crypto-payment.alchemypay.org?userCance=true&orderNum=300217224116810101451",
            "_blank"
          );
        },
        isTelegram() {
          let telegram =
            window.Telegram?.WebApp?.initData ||
            window.Telegram?.WebApp?.initDataUnsafe?.query_id;

          const userAgent =
            navigator.userAgent || navigator.vendor || window.opera;
          let c = /Telegram/i.test(userAgent);
          console.group("Telegram");
          console.log("telegram");
          console.log("query_id");
          console.log(window.Telegram);
          console.log(window.Telegram?.WebApp);
          console.log(window.Telegram?.WebApp?.initData);
          console.log(window.Telegram?.WebApp?.initDataUnsafe);
          console.log(window.Telegram?.WebApp?.initDataUnsafe?.query_id);
          console.groupEnd();
        },
      },
    });
  </script>

  <script></script>
</html>
